import{a as s,p as e,w as y}from"./chunk-PVWAREVJ-BQK1PYK5.js";function v({value:l,onChange:d,placeholder:u="Írj ide..."}){const r=s.useRef(null);s.useEffect(()=>{r.current&&r.current.innerText!==l&&(r.current.innerText=l)},[l]);const a=()=>{r.current&&d(r.current.innerText)};return e.jsx("div",{ref:r,contentEditable:!0,onInput:a,suppressContentEditableWarning:!0,style:{width:"100%",minHeight:"40px",padding:"8px 12px",border:"2px solid #9f7aea",borderRadius:"8px",fontSize:"16px",fontFamily:"Arial, Helvetica, sans-serif",outline:"none",whiteSpace:"pre-wrap",position:"relative"},"data-placeholder":u,className:"editable-div"})}function N(){const[l,d]=s.useState("http://192.168.1.185:8000"),[u,r]=s.useState(""),[a,g]=s.useState("hd_hun"),[i,x]=s.useState(!1),[c,h]=s.useState(null),[p,m]=s.useState(""),[o,j]=s.useState(""),w=async()=>{x(!0),m(""),h(null);try{const t=await fetch(`/api/torrents?pattern=${encodeURIComponent(o)}&type=${a}`);if(!t.ok)throw new Error("Hiba a lekérdezésnél");const n=await t.json();h(n)}catch(t){m(t.message||"Ismeretlen hiba")}finally{x(!1)}},b=async t=>{try{const n=await fetch("/api/torrents/download",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const f=await n.json();return console.log("Download successful:",f),alert("Letöltés sikeresen elindítva!"),f}catch(n){throw console.error("Download failed:",n),alert("Hiba a letöltés során!"),n}};return e.jsx("main",{className:"min-h-screen w-full bg-white flex flex-col justify-center items-center",children:e.jsxs("section",{className:"w-full h-full flex flex-col justify-center items-center px-4 py-16",children:[e.jsx("h1",{className:"text-4xl font-bold text-purple-700 mb-8 text-center",children:"Torrent kereső"}),e.jsxs("div",{className:"w-full max-w-2xl flex flex-col gap-6",children:[e.jsxs("form",{onSubmit:t=>{t.preventDefault(),w()},className:"flex flex-col gap-4 w-full",children:[e.jsxs("select",{style:{fontSize:"16px",fontFamily:"Arial, Helvetica, sans-serif",WebkitAppearance:"none"},value:a,onChange:t=>g(t.target.value),className:"w-full px-4 py-3 border-2 border-purple-400 rounded-lg focus:outline-none focus:border-indigo-500 text-base bg-white",children:[e.jsx("option",{value:"hd_hun",children:"HD - Magyar filmek"}),e.jsx("option",{value:"hd",children:"HD - Angol filmek"}),e.jsx("option",{value:"hdser_hun",children:"HD - Magyar sorozatok"}),e.jsx("option",{value:"hdser",children:"HD - Angol sorozatok"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 w-full",children:[e.jsx(v,{value:o,onChange:j,placeholder:"Keresési minta..."}),e.jsx("button",{type:"submit",disabled:i||!o,className:`px-8 py-3 rounded-lg text-lg font-semibold transition-colors ${i||!o?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-indigo-400 to-purple-500 text-white hover:from-indigo-500 hover:to-purple-600"}`,children:i?"Keresés...":"Keresés"})]})]}),p&&e.jsx("div",{className:"text-red-500 font-medium text-center",children:p}),c&&e.jsxs("div",{className:"w-full mt-4",children:[e.jsxs("h2",{className:"text-indigo-600 text-xl font-semibold mb-4",children:["Találatok (",c.torrents.length," db):"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-[60vh] overflow-auto",children:c.torrents.map(t=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-md hover:shadow-lg transition-shadow",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2 line-clamp-2",children:t.title}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Méret:"}),e.jsxs("span",{className:"font-medium",children:[(t.size._size/1024**3).toFixed(2)," GB"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Seedek:"}),e.jsx("span",{className:"font-medium text-green-600",children:t.seed})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Dátum:"}),e.jsx("span",{className:"font-medium",children:new Date(t.date).toLocaleDateString("hu-HU")})]})]}),e.jsx("div",{className:"mt-3 flex gap-2",children:e.jsx("button",{onClick:()=>b(t),className:"flex-1 bg-green-500 text-white text-center py-2 px-3 rounded text-sm font-medium hover:bg-green-600 transition-colors cursor-pointer",children:"Letöltés"})})]},t.id))})]})]})]})})}function k({}){return[{title:"New React Router App"},{name:"description",content:"Welcome to React Router!"}]}const H=y(function(){return e.jsx(N,{})});export{H as default,k as meta};
